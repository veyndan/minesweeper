{"version":3,"sources":["abstract.js"],"names":[],"mappings":"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","file":"abstract-compiled.js","sourcesContent":["// the parent class for all fstreams.\n\nmodule.exports = Abstract\n\nvar Stream = require(\"stream\").Stream\n  , inherits = require(\"inherits\")\n\nfunction Abstract () {\n  Stream.call(this)\n}\n\ninherits(Abstract, Stream)\n\nAbstract.prototype.on = function (ev, fn) {\n  if (ev === \"ready\" && this.ready) {\n    process.nextTick(fn.bind(this))\n  } else {\n    Stream.prototype.on.call(this, ev, fn)\n  }\n  return this\n}\n\nAbstract.prototype.abort = function () {\n  this._aborted = true\n  this.emit(\"abort\")\n}\n\nAbstract.prototype.destroy = function () {}\n\nAbstract.prototype.warn = function (msg, code) {\n  var me = this\n    , er = decorate(msg, code, me)\n  if (!me.listeners(\"warn\")) {\n    console.error(\"%s %s\\n\" +\n                  \"path = %s\\n\" +\n                  \"syscall = %s\\n\" +\n                  \"fstream_type = %s\\n\" +\n                  \"fstream_path = %s\\n\" +\n                  \"fstream_unc_path = %s\\n\" +\n                  \"fstream_class = %s\\n\" +\n                  \"fstream_stack =\\n%s\\n\",\n                  code || \"UNKNOWN\",\n                  er.stack,\n                  er.path,\n                  er.syscall,\n                  er.fstream_type,\n                  er.fstream_path,\n                  er.fstream_unc_path,\n                  er.fstream_class,\n                  er.fstream_stack.join(\"\\n\"))\n  } else {\n    me.emit(\"warn\", er)\n  }\n}\n\nAbstract.prototype.info = function (msg, code) {\n  this.emit(\"info\", msg, code)\n}\n\nAbstract.prototype.error = function (msg, code, th) {\n  var er = decorate(msg, code, this)\n  if (th) throw er\n  else this.emit(\"error\", er)\n}\n\nfunction decorate (er, code, me) {\n  if (!(er instanceof Error)) er = new Error(er)\n  er.code = er.code || code\n  er.path = er.path || me.path\n  er.fstream_type = er.fstream_type || me.type\n  er.fstream_path = er.fstream_path || me.path\n  if (me._path !== me.path) {\n    er.fstream_unc_path = er.fstream_unc_path || me._path\n  }\n  if (me.linkpath) {\n    er.fstream_linkpath = er.fstream_linkpath || me.linkpath\n  }\n  er.fstream_class = er.fstream_class || me.constructor.name\n  er.fstream_stack = er.fstream_stack ||\n    new Error().stack.split(/\\n/).slice(3).map(function (s) {\n      return s.replace(/^    at /, \"\")\n    })\n\n  return er\n}\n"]}