{"version":3,"sources":["write-then-read.js"],"names":[],"mappings":"AAAA,IAAI,KAAK,QAAQ,KAAR,CAAT;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,OAAO,QAAQ,KAAR,EAAe,IAA1B;AACA,IAAI,IAAI,QAAQ,MAAR,EAAgB,OAAhB,CAAwB,SAAxB,EAAmC,OAAnC,CAAR;;AAEA,QAAQ,KAAR,CAAc,SAAd;;;AAGA,QAAQ,MAAR,CAAe,KAAf,CAAqB,EAArB;;AAEA,IAAI,MAAM,IAAV;AACA,IAAI,QAAQ,IAAI,KAAJ,CAAU,GAAV,CAAZ;;AAEA,KAAK,YAAL,EAAmB,UAAU,CAAV,EAAa;AAC9B,SAAO,IAAP,CAAY,CAAZ;AACA,SAAO,IAAP,CAAY,CAAZ;;AAEA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAApB,EAAyB,EAAE,CAA3B,EAA8B;AAC5B,UAAM,CAAN,IAAW,gBAAgB,CAA3B;AACA,OAAG,aAAH,CAAiB,MAAM,CAAN,CAAjB,EAA2B,SAA3B;AACD;;AAED,IAAE,GAAF;AACD,CAVD;;AAYA,KAAK,YAAL,EAAmB,UAAU,CAAV,EAAa;;AAE9B,MAAI,OAAO,CAAX;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAApB,EAAyB,EAAE,CAA3B,EAA8B;AAC5B,OAAG,QAAH,CAAY,MAAM,CAAN,CAAZ,EAAsB,UAAS,GAAT,EAAc,IAAd,EAAoB;AACxC,UAAI,GAAJ,EACE,MAAM,GAAN;;AAEF,QAAE,IAAF;AACA,UAAI,SAAS,GAAb,EAAkB;AAChB,UAAE,IAAF,CAAO,SAAP;AACA,UAAE,GAAF;AACD;AACF,KATD;AAUD;AACF,CAfD;;AAiBA,KAAK,SAAL,EAAgB,UAAU,CAAV,EAAa;AAC3B,SAAO,IAAP,CAAY,CAAZ;AACA,IAAE,GAAF;AACD,CAHD","file":"write-then-read-compiled.js","sourcesContent":["var fs = require('../');\nvar rimraf = require('rimraf');\nvar mkdirp = require('mkdirp');\nvar test = require('tap').test;\nvar p = require('path').resolve(__dirname, 'files');\n\nprocess.chdir(__dirname)\n\n// Make sure to reserve the stderr fd\nprocess.stderr.write('');\n\nvar num = 4097;\nvar paths = new Array(num);\n\ntest('make files', function (t) {\n  rimraf.sync(p);\n  mkdirp.sync(p);\n\n  for (var i = 0; i < num; ++i) {\n    paths[i] = 'files/file-' + i;\n    fs.writeFileSync(paths[i], 'content');\n  }\n\n  t.end();\n})\n\ntest('read files', function (t) {\n  // now read them\n  var done = 0;\n  for (var i = 0; i < num; ++i) {\n    fs.readFile(paths[i], function(err, data) {\n      if (err)\n        throw err;\n\n      ++done;\n      if (done === num) {\n        t.pass('success');\n        t.end()\n      }\n    });\n  }\n});\n\ntest('cleanup', function (t) {\n  rimraf.sync(p);\n  t.end();\n});\n"]}