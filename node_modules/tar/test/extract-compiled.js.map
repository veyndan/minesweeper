{"version":3,"sources":["extract.js"],"names":[],"mappings":"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","file":"extract-compiled.js","sourcesContent":["// Set the umask, so that it works the same everywhere.\nprocess.umask(parseInt('22', 8))\n\nvar tap = require(\"tap\")\n  , tar = require(\"../tar.js\")\n  , fs = require(\"fs\")\n  , path = require(\"path\")\n  , file = path.resolve(__dirname, \"fixtures/c.tar\")\n  , target = path.resolve(__dirname, \"tmp/extract-test\")\n  , index = 0\n  , fstream = require(\"fstream\")\n\n  , ee = 0\n  , expectEntries =\n[ { path: 'c.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 513,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'cc.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 513,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 100,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'Ω.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 2,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: 'Ω.txt',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 2,\n    linkpath: '',\n    nlink: 1,\n    dev: 234881026,\n    ino: 51693379 },\n  { path: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 200,\n    linkpath: '',\n    nlink: 1,\n    dev: 234881026,\n    ino: 51681874 },\n  { path: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 201,\n    linkpath: '',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: '200LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL',\n    mode: '777',\n    type: '2',\n    depth: undefined,\n    size: 0,\n    linkpath: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    nlink: undefined,\n    dev: undefined,\n    ino: undefined },\n  { path: '200-hard',\n    mode: '644',\n    type: '0',\n    depth: undefined,\n    size: 200,\n    linkpath: '',\n    nlink: 2,\n    dev: 234881026,\n    ino: 51681874 },\n  { path: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '644',\n    type: '1',\n    depth: undefined,\n    size: 0,\n    linkpath: path.resolve(target, '200-hard'),\n    nlink: 2,\n    dev: 234881026,\n    ino: 51681874 } ]\n\n  , ef = 0\n  , expectFiles =\n[ { path: '',\n    mode: '40755',\n    type: 'Directory',\n    depth: 0,\n    linkpath: undefined },\n  { path: '/200-hard',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 200,\n    linkpath: undefined,\n    nlink: 2 },\n  { path: '/200LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL',\n    mode: '120755',\n    type: 'SymbolicLink',\n    depth: 1,\n    size: 200,\n    linkpath: '200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    nlink: 1 },\n  { path: '/200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '100644',\n    type: 'Link',\n    depth: 1,\n    size: 200,\n    linkpath: path.join(target, '200-hard'),\n    nlink: 2 },\n  { path: '/c.txt',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 513,\n    linkpath: undefined,\n    nlink: 1 },\n  { path: '/cc.txt',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 513,\n    linkpath: undefined,\n    nlink: 1 },\n  { path: '/r',\n    mode: '40755',\n    type: 'Directory',\n    depth: 1,\n    linkpath: undefined },\n  { path: '/r/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 2,\n    linkpath: undefined },\n  { path: '/r/e/a',\n    mode: '40755',\n    type: 'Directory',\n    depth: 3,\n    linkpath: undefined },\n  { path: '/r/e/a/l',\n    mode: '40755',\n    type: 'Directory',\n    depth: 4,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l',\n    mode: '40755',\n    type: 'Directory',\n    depth: 5,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y',\n    mode: '40755',\n    type: 'Directory',\n    depth: 6,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-',\n    mode: '40755',\n    type: 'Directory',\n    depth: 7,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d',\n    mode: '40755',\n    type: 'Directory',\n    depth: 8,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 9,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 10,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p',\n    mode: '40755',\n    type: 'Directory',\n    depth: 11,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-',\n    mode: '40755',\n    type: 'Directory',\n    depth: 12,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f',\n    mode: '40755',\n    type: 'Directory',\n    depth: 13,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o',\n    mode: '40755',\n    type: 'Directory',\n    depth: 14,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l',\n    mode: '40755',\n    type: 'Directory',\n    depth: 15,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d',\n    mode: '40755',\n    type: 'Directory',\n    depth: 16,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e',\n    mode: '40755',\n    type: 'Directory',\n    depth: 17,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r',\n    mode: '40755',\n    type: 'Directory',\n    depth: 18,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-',\n    mode: '40755',\n    type: 'Directory',\n    depth: 19,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p',\n    mode: '40755',\n    type: 'Directory',\n    depth: 20,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a',\n    mode: '40755',\n    type: 'Directory',\n    depth: 21,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t',\n    mode: '40755',\n    type: 'Directory',\n    depth: 22,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h',\n    mode: '40755',\n    type: 'Directory',\n    depth: 23,\n    linkpath: undefined },\n  { path: '/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n    mode: '100644',\n    type: 'File',\n    depth: 24,\n    size: 100,\n    linkpath: undefined,\n    nlink: 1 },\n  { path: '/Ω.txt',\n    mode: '100644',\n    type: 'File',\n    depth: 1,\n    size: 2,\n    linkpath: undefined,\n    nlink: 1 } ]\n\n\n\n// The extract class basically just pipes the input\n// to a Reader, and then to a fstream.DirWriter\n\n// So, this is as much a test of fstream.Reader and fstream.Writer\n// as it is of tar.Extract, but it sort of makes sense.\n\ntap.test(\"preclean\", function (t) {\n  require(\"rimraf\").sync(__dirname + \"/tmp/extract-test\")\n  t.pass(\"cleaned!\")\n  t.end()\n})\n\ntap.test(\"extract test\", function (t) {\n  var extract = tar.Extract(target)\n  var inp = fs.createReadStream(file)\n\n  // give it a weird buffer size to try to break in odd places\n  inp.bufferSize = 1234\n\n  inp.pipe(extract)\n\n  extract.on(\"end\", function () {\n    t.equal(ee, expectEntries.length, \"should see \"+ee+\" entries\")\n\n    // should get no more entries after end\n    extract.removeAllListeners(\"entry\")\n    extract.on(\"entry\", function (e) {\n      t.fail(\"Should not get entries after end!\")\n    })\n\n    next()\n  })\n\n  extract.on(\"entry\", function (entry) {\n    var found =\n      { path: entry.path\n      , mode: entry.props.mode.toString(8)\n      , type: entry.props.type\n      , depth: entry.props.depth\n      , size: entry.props.size\n      , linkpath: entry.props.linkpath\n      , nlink: entry.props.nlink\n      , dev: entry.props.dev\n      , ino: entry.props.ino\n      }\n\n    var wanted = expectEntries[ee ++]\n\n    t.equivalent(found, wanted, \"tar entry \" + ee + \" \" + wanted.path)\n  })\n\n  function next () {\n    var r = fstream.Reader({ path: target\n                           , type: \"Directory\"\n                           // this is just to encourage consistency\n                           , sort: \"alpha\" })\n\n    r.on(\"ready\", function () {\n      foundEntry(r)\n    })\n\n    r.on(\"end\", finish)\n\n    function foundEntry (entry) {\n      var p = entry.path.substr(target.length)\n      var found =\n        { path: p\n        , mode: entry.props.mode.toString(8)\n        , type: entry.props.type\n        , depth: entry.props.depth\n        , size: entry.props.size\n        , linkpath: entry.props.linkpath\n        , nlink: entry.props.nlink\n        }\n\n      var wanted = expectFiles[ef ++]\n\n      t.has(found, wanted, \"unpacked file \" + ef + \" \" + wanted.path)\n\n      entry.on(\"entry\", foundEntry)\n    }\n\n    function finish () {\n      t.equal(ef, expectFiles.length, \"should have \"+ef+\" items\")\n      t.end()\n    }\n  }\n})\n"]}