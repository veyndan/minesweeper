{"version":3,"sources":["touchmouse.js"],"names":[],"mappings":";;;;;;;;;;AAUA,IAAI,gBAAgB,IAApB;AACA,IAAI,iBAAiB,EAArB;;AAEA,SAAS,eAAT,GAA2B;AACvB,UAAM,KAAN,CAAY,IAAZ,EAAkB,SAAlB;;AAEA,QAAI,UAAU,OAAO,KAAK,OAAZ,EAAqB,IAArB,CAAd;AACA,SAAK,KAAL,GAAa,IAAI,UAAJ,CAAe,KAAK,OAApB,EAA6B,OAA7B,CAAb;AACA,SAAK,KAAL,GAAa,IAAI,UAAJ,CAAe,KAAK,OAApB,EAA6B,OAA7B,CAAb;;AAEA,SAAK,YAAL,GAAoB,IAApB;AACA,SAAK,WAAL,GAAmB,EAAnB;AACH;;AAED,QAAQ,eAAR,EAAyB,KAAzB,EAAgC;;;;;;;AAO5B,aAAS,SAAS,UAAT,CAAoB,OAApB,EAA6B,UAA7B,EAAyC,SAAzC,EAAoD;AACzD,YAAI,UAAW,UAAU,WAAV,IAAyB,gBAAxC;AAAA,YACI,UAAW,UAAU,WAAV,IAAyB,gBADxC;;AAGA,YAAI,WAAW,UAAU,kBAArB,IAA2C,UAAU,kBAAV,CAA6B,gBAA5E,EAA8F;AAC1F;AACH;;;AAGD,YAAI,OAAJ,EAAa;AACT,0BAAc,IAAd,CAAmB,IAAnB,EAAyB,UAAzB,EAAqC,SAArC;AACH,SAFD,MAEO,IAAI,WAAW,iBAAiB,IAAjB,CAAsB,IAAtB,EAA4B,SAA5B,CAAf,EAAuD;AAC1D;AACH;;AAED,aAAK,QAAL,CAAc,OAAd,EAAuB,UAAvB,EAAmC,SAAnC;AACH,KAvB2B;;;;;AA4B5B,aAAS,SAAS,OAAT,GAAmB;AACxB,aAAK,KAAL,CAAW,OAAX;AACA,aAAK,KAAL,CAAW,OAAX;AACH;AA/B2B,CAAhC;;AAkCA,SAAS,aAAT,CAAuB,SAAvB,EAAkC,SAAlC,EAA6C;AACzC,QAAI,YAAY,WAAhB,EAA6B;AACzB,aAAK,YAAL,GAAoB,UAAU,eAAV,CAA0B,CAA1B,EAA6B,UAAjD;AACA,qBAAa,IAAb,CAAkB,IAAlB,EAAwB,SAAxB;AACH,KAHD,MAGO,IAAI,aAAa,YAAY,YAAzB,CAAJ,EAA4C;AAC/C,qBAAa,IAAb,CAAkB,IAAlB,EAAwB,SAAxB;AACH;AACJ;;AAED,SAAS,YAAT,CAAsB,SAAtB,EAAiC;AAC7B,QAAI,QAAQ,UAAU,eAAV,CAA0B,CAA1B,CAAZ;;AAEA,QAAI,MAAM,UAAN,KAAqB,KAAK,YAA9B,EAA4C;AACxC,YAAI,YAAY,EAAC,GAAG,MAAM,OAAV,EAAmB,GAAG,MAAM,OAA5B,EAAhB;AACA,aAAK,WAAL,CAAiB,IAAjB,CAAsB,SAAtB;AACA,YAAI,MAAM,KAAK,WAAf;AACA,YAAI,kBAAkB,YAAW;AAC7B,gBAAI,IAAI,IAAI,OAAJ,CAAY,SAAZ,CAAR;AACA,gBAAI,IAAI,CAAC,CAAT,EAAY;AACR,oBAAI,MAAJ,CAAW,CAAX,EAAc,CAAd;AACH;AACJ,SALD;AAMA,mBAAW,eAAX,EAA4B,aAA5B;AACH;AACJ;;AAED,SAAS,gBAAT,CAA0B,SAA1B,EAAqC;AACjC,QAAI,IAAI,UAAU,QAAV,CAAmB,OAA3B;AAAA,QAAoC,IAAI,UAAU,QAAV,CAAmB,OAA3D;AACA,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,WAAL,CAAiB,MAArC,EAA6C,GAA7C,EAAkD;AAC9C,YAAI,IAAI,KAAK,WAAL,CAAiB,CAAjB,CAAR;AACA,YAAI,KAAK,KAAK,GAAL,CAAS,IAAI,EAAE,CAAf,CAAT;AAAA,YAA4B,KAAK,KAAK,GAAL,CAAS,IAAI,EAAE,CAAf,CAAjC;AACA,YAAI,MAAM,cAAN,IAAwB,MAAM,cAAlC,EAAkD;AAC9C,mBAAO,IAAP;AACH;AACJ;AACD,WAAO,KAAP;AACH","file":"touchmouse-compiled.js","sourcesContent":["/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n"]}