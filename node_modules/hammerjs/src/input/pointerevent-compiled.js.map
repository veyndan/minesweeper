{"version":3,"sources":["pointerevent.js"],"names":[],"mappings":"AAAA,IAAI,oBAAoB;AACpB,iBAAa,WADO;AAEpB,iBAAa,UAFO;AAGpB,eAAW,SAHS;AAIpB,mBAAe,YAJK;AAKpB,gBAAY;AALQ,CAAxB;;;AASA,IAAI,yBAAyB;AACzB,OAAG,gBADsB;AAEzB,OAAG,cAFsB;AAGzB,OAAG,gBAHsB;AAIzB,OAAG,iB;AAJsB,CAA7B;;AAOA,IAAI,yBAAyB,aAA7B;AACA,IAAI,wBAAwB,qCAA5B;;;AAGA,IAAI,OAAO,cAAP,IAAyB,CAAC,OAAO,YAArC,EAAmD;AAC/C,6BAAyB,eAAzB;AACA,4BAAwB,2CAAxB;AACH;;;;;;;AAOD,SAAS,iBAAT,GAA6B;AACzB,SAAK,IAAL,GAAY,sBAAZ;AACA,SAAK,KAAL,GAAa,qBAAb;;AAEA,UAAM,KAAN,CAAY,IAAZ,EAAkB,SAAlB;;AAEA,SAAK,KAAL,GAAc,KAAK,OAAL,CAAa,OAAb,CAAqB,aAArB,GAAqC,EAAnD;AACH;;AAED,QAAQ,iBAAR,EAA2B,KAA3B,EAAkC;;;;;AAK9B,aAAS,SAAS,SAAT,CAAmB,EAAnB,EAAuB;AAC5B,YAAI,QAAQ,KAAK,KAAjB;AACA,YAAI,gBAAgB,KAApB;;AAEA,YAAI,sBAAsB,GAAG,IAAH,CAAQ,WAAR,GAAsB,OAAtB,CAA8B,IAA9B,EAAoC,EAApC,CAA1B;AACA,YAAI,YAAY,kBAAkB,mBAAlB,CAAhB;AACA,YAAI,cAAc,uBAAuB,GAAG,WAA1B,KAA0C,GAAG,WAA/D;;AAEA,YAAI,UAAW,eAAe,gBAA9B;;;AAGA,YAAI,aAAa,QAAQ,KAAR,EAAe,GAAG,SAAlB,EAA6B,WAA7B,CAAjB;;;AAGA,YAAI,YAAY,WAAZ,KAA4B,GAAG,MAAH,KAAc,CAAd,IAAmB,OAA/C,CAAJ,EAA6D;AACzD,gBAAI,aAAa,CAAjB,EAAoB;AAChB,sBAAM,IAAN,CAAW,EAAX;AACA,6BAAa,MAAM,MAAN,GAAe,CAA5B;AACH;AACJ,SALD,MAKO,IAAI,aAAa,YAAY,YAAzB,CAAJ,EAA4C;AAC/C,4BAAgB,IAAhB;AACH;;;AAGD,YAAI,aAAa,CAAjB,EAAoB;AAChB;AACH;;;AAGD,cAAM,UAAN,IAAoB,EAApB;;AAEA,aAAK,QAAL,CAAc,KAAK,OAAnB,EAA4B,SAA5B,EAAuC;AACnC,sBAAU,KADyB;AAEnC,6BAAiB,CAAC,EAAD,CAFkB;AAGnC,yBAAa,WAHsB;AAInC,sBAAU;AAJyB,SAAvC;;AAOA,YAAI,aAAJ,EAAmB;;AAEf,kBAAM,MAAN,CAAa,UAAb,EAAyB,CAAzB;AACH;AACJ;AA/C6B,CAAlC","file":"pointerevent-compiled.js","sourcesContent":["var POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n"]}