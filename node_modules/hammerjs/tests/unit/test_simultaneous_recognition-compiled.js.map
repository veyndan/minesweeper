{"version":3,"sources":["test_simultaneous_recognition.js"],"names":[],"mappings":"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","file":"test_simultaneous_recognition-compiled.js","sourcesContent":["var el,\n    hammer;\n\nmodule('Simultaenous recognition', {\n    setup: function() {\n        el = utils.createHitArea()\n    },\n    teardown: function() {\n        hammer && hammer.destroy();\n    }\n});\n\nasyncTest('should pinch and pan simultaneously be recognized when enabled', function() {\n    expect(4);\n\n    var panCount = 0,\n        pinchCount = 0;\n\n    hammer = new Hammer.Manager(el, {\n        touchAction: 'none'\n    });\n\n    hammer.add(new Hammer.Pan({threshold: 5, pointers: 2}));\n\n    var pinch = new Hammer.Pinch({ threshold: 0, pointers: 2});\n    hammer.add(pinch);\n    pinch.recognizeWith(hammer.get('pan'));\n\n    hammer.on('panend', function() {\n        panCount++;\n    });\n    hammer.on('pinchend', function() {\n        pinchCount++;\n    });\n\n    var executeGesture = function(cb) {\n        var event, touches;\n\n        touches = [\n            {clientX: 0, clientY: 10, identifier: 0, target: el },\n            {clientX: 10, clientY: 10, identifier: 1, target: el }\n        ];\n\n        event = document.createEvent('Event');\n        event.initEvent('touchstart', true, true);\n        event.touches = touches;\n        event.targetTouches = touches;\n        event.changedTouches = touches;\n        el.dispatchEvent(event);\n\n        setTimeout(function() {\n            touches = [\n                {clientX: 10, clientY: 20, identifier: 0, target: el },\n                {clientX: 20, clientY: 20, identifier: 1, target: el }\n            ];\n\n            event = document.createEvent('Event');\n            event.initEvent('touchmove', true, true);\n            event.touches = touches;\n            event.targetTouches = touches;\n            event.changedTouches = touches;\n\n            el.dispatchEvent(event);\n        }, 100);\n\n        setTimeout(function() {\n            touches = [\n                {clientX: 20, clientY: 30, identifier: 0, target: el },\n                {clientX: 40, clientY: 30, identifier: 1, target: el }\n            ];\n\n            event = document.createEvent('Event');\n            event.initEvent('touchmove', true, true);\n            event.touches = touches;\n            event.targetTouches = touches;\n            event.changedTouches = touches;\n            el.dispatchEvent(event);\n\n            event = document.createEvent('Event');\n            event.initEvent('touchend', true, true);\n            event.touches = touches;\n            event.targetTouches = touches;\n            event.changedTouches = touches;\n            el.dispatchEvent(event);\n\n            cb();\n        }, 200);\n    };\n\n    // 2 gesture will be recognized\n    executeGesture(function() {\n        equal(panCount, 1);\n        equal(pinchCount, 1);\n\n        pinch.dropRecognizeWith(hammer.get('pan'));\n\n        // only the pan gesture will be recognized\n        executeGesture(function() {\n            equal(panCount, 2);\n            equal(pinchCount, 1);\n\n            start();\n        });\n    });\n});\n\ntest('the first gesture should block the following gestures (Tap & DoubleTap)', function() {\n    expect(4);\n\n    var tapCount = 0,\n        doubleTapCount = 0;\n\n    hammer = new Hammer.Manager(el, {\n        touchAction: 'none'\n    });\n\n    var tap = new Hammer.Tap();\n    var doubleTap = new Hammer.Tap({event: 'doubletap', taps: 2});\n\n    hammer.add(tap);\n    hammer.add(doubleTap);\n\n    hammer.on('tap', function() {\n        tapCount++;\n    });\n    hammer.on('doubletap', function() {\n        doubleTapCount++;\n    });\n\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n\n    equal(tapCount, 2, 'on a double tap gesture, the tap gesture is recognized twice');\n    equal(doubleTapCount, 0, 'double tap gesture is not recognized because the prior tap gesture does not recognize it simultaneously');\n\n    doubleTap.recognizeWith(hammer.get('tap'));\n\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n\n    equal(tapCount, 4);\n    equal(doubleTapCount, 1, 'when the tap gesture is configured to work simultaneously, tap & doubleTap can be recognized simultaneously');\n});\n\ntest('when disabled, the first gesture should not block gestures  (Tap & DoubleTap )', function() {\n    expect(4);\n\n    var tapCount = 0,\n        doubleTapCount = 0;\n\n    hammer = new Hammer.Manager(el, {\n        touchAction: 'none'\n    });\n\n    var tap = new Hammer.Tap();\n    var doubleTap = new Hammer.Tap({event: 'doubletap', taps: 2});\n\n    hammer.add(tap);\n    hammer.add(doubleTap);\n\n    hammer.on('tap', function() {\n        tapCount++;\n    });\n    hammer.on('doubletap', function() {\n        doubleTapCount++;\n    });\n\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n\n    equal(tapCount, 2, 'on a double tap gesture, the tap gesture is recognized twice');\n    equal(doubleTapCount, 0, 'double tap gesture is not recognized because the prior tap gesture does not recognize it simultaneously');\n\n    hammer.get('tap').set({ enable: false });\n\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n\n    equal(tapCount, 2, 'tap gesture should not be recognized when the recognizer is disabled');\n    equal(doubleTapCount, 1, 'when the tap gesture is disabled, doubleTap can be recognized');\n});\n\ntest('the first gesture should block the following gestures (DoubleTap & Tap)', function() {\n    expect(4);\n\n    var tapCount = 0,\n        doubleTapCount = 0;\n\n    hammer = new Hammer.Manager(el, {\n        touchAction: 'none'\n    });\n\n    var tap = new Hammer.Tap();\n    var doubleTap = new Hammer.Tap({event: 'doubletap', taps: 2});\n\n    hammer.add(doubleTap);\n    hammer.add(tap);\n\n    hammer.on('tap', function() {\n        tapCount++;\n    });\n    hammer.on('doubletap', function() {\n        doubleTapCount++;\n    });\n\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n\n    equal(doubleTapCount, 1, 'double tap is recognized');\n    equal(tapCount, 1, 'tap is detected, the doubletap is only catched by the doubletap recognizer');\n\n    // doubletap and tap together\n    doubleTap.recognizeWith(hammer.get('tap'));\n    doubleTapCount = 0;\n    tapCount = 0;\n\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n    utils.dispatchTouchEvent(el, 'start', 0, 10);\n    utils.dispatchTouchEvent(el, 'end', 0, 10);\n\n    equal(doubleTapCount, 1);\n    equal(tapCount, 2, 'when the tap gesture is configured to work simultaneously, tap & doubleTap can be recognized simultaneously');\n});\n"]}